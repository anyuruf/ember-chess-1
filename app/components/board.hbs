<div class="surface">
  <table class="board">
    <tr>
      <td></td>
      <th scope="col">a</th>
      <th scope="col">b</th>
      <th scope="col">c</th>
      <th scope="col">d</th>
      <th scope="col">e</th>
      <th scope="col">f</th>
      <th scope="col">g</th>
      <th scope="col">h</th>
    </tr>
    {{#each @board.grid as |row i|}}
      <tr class="row"> 
        <th scope="row">{{add i 1}}</th>
        {{#each row as |piece j|}}
          {{#let (get-position-for-index i j) as |position|}}
            <td class="space">
              {{#if piece}}
                <Piece
                  @piece={{piece}}
                  @select={{fn this.selectPiece piece}}
                  @isMyTurn={{eq this.turnColor piece.color}}
                  @canMoveHere={{includes this.selectedPiece.availablePositions position}}
                  @moveHere={{fn this.movePiece position}}
                />
              {{else}}
                <EmptySpace
                  @canMoveHere={{includes this.selectedPiece.availablePositions position}}
                  @moveHere={{fn this.movePiece position}}
                />
              {{/if}}
            </td>
          {{/let}}
        {{/each}}
      </tr>
    {{/each}}
  </table>
</div>